<!DOCTYPE html>
<html>
    <head>
        <script src="../scripts/global.js"></script>
        <script src="../scripts/addForm.js"></script>
        <link rel="stylesheet" href="../styles/global.css">
        <link rel="stylesheet" href="../styles/list.css">
        <link rel="stylesheet" href="../styles/addForm.css">
    </head>
    <body style="margin:0;">
        <div id="messageContainer" class="messageContainer noshow">
            <div class="messageDiv flex-column">
                <div class="messageCloseIcon cardIcon" onclick="closePrompt()">*</div>
                <div class="messageTitle">Message Title</div>
                <div class="messageText">Here is the message</div>
                <div class="messageOptions flex-row">
                    <div class="btn btn_cancel" onclick="closePrompt()">
                        Cancel
                    </div>
                    <div class=" btn btn_ok">
                        OK
                    </div>
                </div>
            </div>
        </div>

        <div id="spliteSite" class="splitSite flex-row">
            <div id="mainside" class="mainContent">
                <hr width="95%">
                <div class="title addtitle">Add a new recipie:</div>
                <hr width="95%">
                <div class="flex-column listScrollContainer newRecipieForm" style="height: calc(100vh - 100px);">
                    <form id="recipieForm" onsubmit="addNewRecipie()" style="width: 100%;margin-top:0px;margin-bottom: auto;">
                    <hr width="95%">
                    <div class="title">Recipe Attributes:</div>
                    <div class="formSection flex-row">
                        <div class="formInputDiv flex-column col-45">
                            <div class="formInputLabel"><sup class="required">*</sup>Recipie Name:</div>
                            <input id="recipieName" name="recipieName" class="formInput" required onchange="updateAlpha()">
                        </div>
                        <div class="formInputDiv flex-column col-30">
                            <div class="formInputLabel"><sup class="required">*</sup>Category:</div>
                            <select id="recipieCategory" class="formInputSelect" required>
                                <option value="" disabled selected></option>
                                <option value="entree">Entree</option>
                                <option value="side">Side Dish</option>
                                <option value="bread">Bread</option>
                                <option value="soup">Soup</option>
                                <option value="dessert">Dessert</option>
                                <option value="drink">Drink</option>
                            </select>
                        </div>
                        <div class="formInputDiv flex-column col-20">
                            <div class="formInputLabel"><sup class="required">*</sup>Servings:</div>
                            <input type="number" id="recipieServings" name="servings" class="formInput" style="text-align: center;" required>
                        </div>
                    </div>
                    <div class="formSection flex-row">
                    </div>
                    <div class="formSection flex-row">
                        <div class="formInputDiv flex-column col-30">
                            
                            <div class="formInputLabel"><sup class="required">*</sup>Meal:</div>
                            <select id="recipieMeal" class="formInputSelect" required>
                                <option value="" disabled selected></option>
                                <option value="breakfast">Breakfast</option>
                                <option value="lunch">Lunch</option>
                                <option value="dinner">Dinner</option>
                                <option value="snack">Snack</option>
                            </select>
                        </div>

                        <div class="formInputDiv flex-column col-30">
                            <div class="formInputLabel"><sup class="required">*</sup>Influence:</div>
                            <select id="recipieInfluence" class="formInputSelect" required>
                                <option value="" disabled selected></option>
                                <option value="american">American</option>
                                <option value="chinese">Chinese</option>
                                <option value="italian">Italian</option>
                                <option value="mexican">Mexican</option>
                                <option value="misc">Other</option>
                            </select>
                        </div>
                        <div class="formInputDiv flex-column col-20">
                            <div class="formInputLabel"><sup class="required">*</sup>Prep Time:</div>
                            <div class="timeInputs flex-row">
                                <input type="number" id=prepTimeHour name="prepTimeHour" class="formInput" style="text-align: center;" required placeholder=0 onblur=addForm.defaultValue(this,0) onfocus="addForm.defaultValueRemove(this,0)">
                                <div>hr</div>
                                <input type="number" id=prepTimeMinute name="prepTimeMinute" class="formInput" style="text-align: center;" required placeholder=0 onblur=addForm.defaultValue(this,0) onfocus="addForm.defaultValueRemove(this,0)">
                                <div>min</div>
                            </div>
                        </div>
                        <div class="formInputDiv flex-column col-20">
                            <div class="formInputLabel"><sup class="required">*</sup>Cook Time:</div>
                            <div class="timeInputs flex-row">
                                <input type="number" id=cookTimeHour name="cookTimeHour" class="formInput" style="text-align: center;" required placeholder=0 onblur=addForm.defaultValue(this,0) onfocus="addForm.defaultValueRemove(this,0)">
                                <div>hr</div>
                                <input type="number" id=cookTimeMinute name="cookTimeMinute" class="formInput" style="text-align: center;" required placeholder=0 onblur=addForm.defaultValue(this,0) onfocus="addForm.defaultValueRemove(this,0)">
                                <div>min</div>
                            </div>
                        </div>
                    </div>
                    <hr width="95%">
                    <div class="title">Optional Attributes:</div>
                    <div class="formSection flex-row">
                        <div class="formInputDiv flex-column col-30">
                            <div class="formInputLabel ">Alternate Names:</div>
                            <input id="recipieAddtNames" name="recipieAltName" class="formInput optional">
                        </div>
                        <div class="formInputDiv flex-column col-20">
                            <div class="formInputLabel">Alpha Sort By:</div>
                            <input id="recipieAlpha" name="recipieAltName" class="formInput optional" style="text-transform: capitalize" maxlength="1">
                        </div>
                        <div class="formInputDiv flex-column col-30">
                            
                            <div class="formInputLabel">Secondary Meal:</div>
                            <select id="recipieSecondMeal" class="formInputSelect optional">
                                <option value="null" selected>None</option>
                                <option value="breakfast">Breakfast</option>
                                <option value="lunch">Lunch</option>
                                <option value="dinner">Dinner</option>
                                <option value="snack">Snack</option>
                            </select>
                        </div>
                    </div>
                    <hr width="95%">
                    <div class="title">Ingredients:</div>
                    <div id="ingredientsContainer" class="ingredientsContainer">
                        <div class="flex-row ingredientContainer">
                            <div class="ingredientRow flex-row">
                                <div class="title">Name:</div>
                                <input class="formInput col-45 ingName" placeholder="Ingredient Name" required>
                                <div class="title">Amount:</div>
                                <input type="number" class="formInput col-10 ingWhole" style="text-align: center;" required placeholder=0 onblur=addForm.defaultValue(this,0) onfocus="addForm.defaultValueRemove(this,0)">
                                    <select class="formInputSelect col-15 ingFrac">
                                        <option value="" selected></option>
                                        <option value="1/8">1/8</option>
                                        <option value="1/4">1/4</option>
                                        <option value="1/3">1/3</option>
                                        <option value="1/2">1/2</option>
                                        <option value="5/8">5/8</option>
                                        <option value="2/3">2/3</option>
                                        <option value="5/6">5/6</option>
                                        <option value="3/4">3/4</option>
                                        <option value="7/8">7/8</option>
                                        <option value="misc">Other</option>
                                    </select>
                                    <select class="formInputSelect col-20 IngMeasurement" required>
                                        <option value="Cups">Cups</option>
                                        <option value="Tbsp">Tbsp</option>
                                        <option value="tsp">tsp</option>
                                        <option value="oz">Oz</option>
                                        <option value="Cube">Cube</option>
                                        <option value="Can">Can</option>
                                        <option value="Pkg">Pkg</option>
                                        <option value="Container">Container</option>
                                        <option value="Cups">Lb</option>
                                        <option value="Quart">Quart</option>
                                        <option value="Pint">Pint</option>
                                        <option value="Gallon">Gallon</option>
                                        <option value="Drop">Drop</option>
                                        <option value=""></option>
                                    </select>
                                <input class="formInput optional col-30 ingNotes" placeholder="Notes">
                            </div>
                            <div class="deleteIcon" style="width:30px;opacity: 0;" >(</div>

                        </div>            
                    </div>
                    <div class="title" style="cursor: pointer;" onclick="addIngredientRow()" tabindex="0"><b>+</b> Add Another Ingredient</div>
                    <hr width="95%">
                    <div class="title">Steps:</div>
                    <div id="stepsContainer" class="ingredientsContainer">
                        <div class="flex-row ingredientContainer">
                            <div class="ingredientRow flex-row">
                                <div class="title"><span class="stepNum">1</span>)</div>
                                <input class="formInput" placeholder="Type step directions here..." required>
                            </div>
                            <div class="deleteIcon" style="width:30px;opacity: 0;">(</div>

                        </div>
                    </div>
                    <div class="title" style="cursor: pointer;" onclick="addStepRow()" tabindex="0"><b>+</b> Add Another Step</div>
                    <hr width="95%">
                    <div class="title">Recipie Notes: (optional)</div>
                    <div class="flex-row" style="width: 100%;">
                        <textarea id="recipieNotes" class="formInput optional" style="width: 80%; height:50px"></textarea>
                    </div>                    
                    <div class="buttons flex-row" style="margin-bottom:25px;"><input type="submit" class="btn btn_submit" value="Add Recipie to Queue"></div>
                    </form>
                </div>
                <hr width="95%">

            </div>
            <div id="rightside" class="rightSideBar">
                <div style="height: 100vh; width: 100%;" class="flex-column">

                   <div class="buttons"><div id="downloadRecipieButton" class="btn btn_download inactive" onclick="downloadJSON()">Download JSON</div></div>
                   <a id="downloadAnchorElem" style="display:none"></a>
                   <hr style="width: 85%;">
                   <div class="">Recipies Added:</div>
                   <hr style="width: 85%;">
                   <div class="listScrollContainer recipeCardList flex-column">
                       
                        <div id="recipiesToAdd" class="flex-column">

                        </div>
                   </div>
                   <div id="clearQueue" onclick="addForm.removeAllRecipies(false)" class="title">Clear Queue</div>
                   <hr style="width: 85%;">
                </div>
            </div>
        </div>
        <div id="tempy" style="display: none;">
        </div>
    </body>
    <script type="text/javascript">
        //let showLocation;
        function ready(fn) {
            if (document.readyState != 'loading') {
                fn();
            } else {
                document.addEventListener('DOMContentLoaded', fn);
            }
        }

        ready(function () {
            Global.init();
            addForm.init();
            goBack = Global.goBack 
            defaultValue = addForm.defaultValue
            addNewRecipie = addForm.addNewRecipie
            downloadJSON = addForm.downloadJSON
            addIngredientRow = addForm.addIngredientRow
            removeRow = addForm.removeRow
            addStepRow = addForm.addStepRow
            removeRecipie = addForm.removeRecipie
            expandRecipie = addForm.expandRecipie
            closePrompt = addForm.closePrompt
            
        });

        var form = document.getElementById("recipieForm");
        function handleForm(event) { event.preventDefault();console.log(event) } 
        form.addEventListener('submit', handleForm);

        function updateAlpha(){
            let x = document.getElementById("recipieName").value.charAt(0);
            if(Number.isInteger(parseInt(x))){
                x = "#";
            }
            document.getElementById("recipieAlpha").value = x.toUpperCase();
        }
    </script>
</html>
